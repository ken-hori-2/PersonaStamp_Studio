# Fish Audio Studio - Streamlit Web UI

Fish Audio SDKを使用した音声クローン作成とテキスト読み上げ（TTS）生成のためのWebインターフェースです。

## 📋 機能概要

### 🎤 音声クローンモデル作成
- 音声ファイルから高品質な音声クローンモデルを作成
- Whisperによる自動文字起こし機能（オプション）
- モデル名・説明の設定
- 作成したモデルの管理・一覧表示

### 🗣️ テキスト読み上げ生成
- 作成した音声モデルまたはデフォルト音声でのTTS生成
- 感情表現タグ対応（(happy), (sad), (excited)など）
- 話速・出力形式の調整（WAV, MP3, OPUS, PCM）
- 生成音声のダウンロード機能

### 📋 モデル管理
- JSONベースのモデル情報管理（`models.json`）
- モデルの選択・削除機能
- 詳細情報の表示

## 🚀 セットアップ

### 必要な環境

- Python 3.10以上
- Fish Audio API キー

### インストール

1. リポジトリのルートディレクトリで依存関係をインストール：
   ```bash
   pip install -r requirements.txt
   ```

2. 環境変数の設定（オプション）：
   ```bash
   export FISH_AUDIO_API_KEY=your_api_key
   ```
   
   または、`.env`ファイルを作成：
   ```
   FISH_AUDIO_API_KEY=your_api_key
   ```

## 💻 起動方法

```bash
streamlit run streamlit_app/app.py
```

ブラウザで `http://localhost:8501` が自動的に開きます。

## 📖 使い方

### 1. APIキーの設定

初回起動時、サイドバーでFish Audio APIキーを入力してください。
環境変数 `FISH_AUDIO_API_KEY` が設定されている場合は、入力不要です。

### 2. 音声クローンモデルを作成

1. 「🎤 音声クローンモデル作成」タブを選択
2. 音声ファイルをアップロード（WAV, MP3, M4A形式対応）
3. 自動文字起こしを有効にする場合はチェックを入れる（推奨）
4. モデル名と説明を入力
5. 「🚀 モデルを作成」ボタンをクリック

**注意**: 
- モデル作成には時間がかかる場合があります
- 音声ファイルは一時的に保存され、処理後に削除されます
- 自動文字起こしを有効にすると、モデルの精度が向上します

### 3. テキスト読み上げを生成

1. 「🗣️ テキスト読み上げ生成」タブを選択
2. 使用するモデルを選択（作成したモデルまたはデフォルト音声）
3. 読み上げるテキストを入力
4. 感情表現タグを使用する場合：
   - `(happy)` - 明るい声
   - `(sad)` - 悲しい声
   - `(excited)` - 興奮した声
5. 話速や出力形式を調整
6. 「🎵 音声を生成」ボタンをクリック
7. 生成された音声を再生・ダウンロード

### 4. モデル管理

「🗣️ テキスト読み上げ生成」タブの下部にある「📋 モデル管理・一覧」セクションで：
- 作成したモデル一覧を確認
- モデルの詳細情報を表示
- モデルを選択してTTS生成に使用
- 不要なモデルを削除

## 📁 ファイル構成

```
streamlit_app/
├── app.py                    # メインのStreamlitアプリケーション
├── create_voice_clone.py     # 音声クローンモデル作成機能
├── generate_tts.py           # TTS生成機能
├── whisper_sst.py            # Whisper音声認識機能
├── models.json               # モデル情報の永続化ストレージ
└── README.md                 # このファイル
```

## 🔧 設定

### モデル情報の保存場所

モデル情報は `streamlit_app/models.json` に保存されます。

```json
{
  "models": [
    {
      "name": "モデル名",
      "id": "モデルID",
      "description": "説明",
      "created_at": "作成日時"
    }
  ],
  "last_used": {
    "name": "最後に使用したモデル名",
    "id": "最後に使用したモデルID"
  }
}
```

### 出力音声の保存場所

生成された音声ファイルは `output/` ディレクトリに保存されます。

## ⚠️ 注意事項

1. **APIキーの管理**: APIキーは環境変数またはサイドバーで設定してください。Gitにコミットしないよう注意してください。

2. **Whisperモデルのダウンロード**: 初回実行時にWhisperモデルが自動的にダウンロードされます。インターネット接続が必要です。

3. **音声ファイルのサイズ**: 大きな音声ファイルのアップロードには時間がかかる場合があります。

4. **モデルの削除**: モデルを削除すると、`models.json`からは削除されますが、Fish Audio API側のモデルは残ります。

## 🐛 トラブルシューティング

### APIキーが認識されない

- 環境変数が正しく設定されているか確認
- サイドバーで再度APIキーを入力

### モデル作成が失敗する

- APIキーが正しいか確認
- 音声ファイルの形式が対応しているか確認
- クレジット残高を確認

### Whisperが動作しない

- `openai-whisper`パッケージがインストールされているか確認
- 初回実行時はインターネット接続が必要です

### 生成された音声がダウンロードできない

- ブラウザのポップアップブロッカーを確認
- ファイルの権限を確認

## 📝 ライセンス

このプロジェクトのライセンスは親ディレクトリのLICENSEファイルを参照してください。

## 🤝 貢献

バグ報告や機能要望は、GitHubのIssuesでお願いします。

## 📚 関連リンク

- [Fish Audio SDK Documentation](https://fish.audio/)
- [Streamlit Documentation](https://docs.streamlit.io/)
- [OpenAI Whisper](https://github.com/openai/whisper)

